{"version":3,"file":"js/chunks/src_App_vue-ffa383f51f514fe7806d.js","mappings":"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","sources":["webpack://bav/./src/App.vue","webpack://bav/./src/toolkit/util/generate-url.ts","webpack://bav/./src/BankAccountInputMask.vue?5b03","webpack://bav/./src/BankAccountInputMask.vue?2010","webpack://bav/BankAccountInputMask.vue","webpack://bav/./src/BankAccountInputMask.vue?3e4c","webpack://bav/./src/BankAccountInputMask.vue","webpack://bav/./src/toolkit/types/axios-type-guards.ts","webpack://bav/./src/App.vue?4832","webpack://bav/./src/App.vue?5566","webpack://bav/App.vue","webpack://bav/./src/App.vue?f581"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c(_setup.NcDialog,{attrs:{\"name\":_setup.t(_setup.appName, 'BAV - Bank Account Validator (DE)'),\"size\":\"large\",\"close-on-click-outside\":false,\"open\":_setup.showDialog},on:{\"update:open\":function($event){_setup.showDialog=$event}},scopedSlots:_vm._u([{key:\"actions\",fn:function(){return [_c(_setup.NcButton,{attrs:{\"disabled\":_setup.atHistoryBottom},on:{\"click\":function($event){return _setup.stateHistoryGo(-1)}}},[_vm._v(\"\\n      \"+_vm._s(_setup.t(_setup.appName, 'Undo'))+\"\\n    \")]),_vm._v(\" \"),_c(_setup.NcButton,{attrs:{\"disabled\":_setup.atHistoryTop},on:{\"click\":function($event){return _setup.stateHistoryGo(1)}}},[_vm._v(\"\\n      \"+_vm._s(_setup.t(_setup.appName, 'Redo'))+\"\\n    \")]),_vm._v(\" \"),_c(_setup.NcButton,{attrs:{\"disabled\":_setup.emptyContent},on:{\"click\":_setup.clearForm}},[_vm._v(\"\\n      \"+_vm._s(_setup.t(_setup.appName, 'Clear'))+\"\\n    \")]),_vm._v(\" \"),_c(_setup.NcPopover,{attrs:{\"shown\":_setup.showAbout,\"focus-trap\":false},on:{\"update:shown\":function($event){_setup.showAbout=$event}},scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c(_setup.NcButton,{on:{\"click\":function($event){_setup.showAbout = true}}},[_vm._v(\"\\n          \"+_vm._s(_setup.t(_setup.appName, 'About'))+\"\\n        \")])]},proxy:true}])},[_vm._v(\" \"),_c('div',{staticClass:\"about\"},[_vm._v(\"\\n        \"+_vm._s(_setup.about.title)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"about\"},[_vm._v(\"\\n        \"+_vm._s(_setup.about.backendStatus)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"about\"},[_vm._v(\"\\n        \"+_vm._s(_setup.about.policy)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"about checksum\"},[_vm._v(\"\\n        \"+_vm._s(_setup.about.checksumWarning)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"about disclaimer\"},[_vm._v(\"\\n        \"+_vm._s(_setup.about.disclaimer)+\"\\n      \")])]),_vm._v(\" \"),_c(_setup.NcButton,{on:{\"click\":function($event){_setup.showDialog = false}}},[_vm._v(\"\\n      \"+_vm._s(_setup.t(_setup.appName, 'Close'))+\"\\n    \")])]},proxy:true},{key:\"default\",fn:function(){return [_c(_setup.DynamicSvgIcon,{staticClass:\"dialog-app-icon\",attrs:{\"size\":34,\"data\":_setup.appIcon,\"title\":_setup.t(_setup.appName, 'app-logo')}}),_vm._v(\" \"),_c(_setup.BankAccountInputMask,{ref:\"inputForm\",attrs:{\"bank-account\":_setup.accountData},on:{\"update:bankAccount\":_setup.onUpdateBankAccount,\"blur:account-field\":_setup.onBlur}}),_vm._v(\" \"),(_setup.hints.length > 0)?_c('h6',{staticClass:\"hints\"},[_vm._v(\"\\n      \"+_vm._s(_setup.t(_setup.appName, 'Errors and Hints'))+\"\\n    \")]):_vm._e(),_vm._v(\" \"),_vm._l((_setup.hints),function(hint){return _c('span',{staticClass:\"hint\"},[_vm._v(_vm._s(hint)+\". \")])}),_vm._v(\" \"),(_setup.suggestionsLength === 1)?_c('h6',[_vm._v(\"\\n      \"+_vm._s(_setup.t(_setup.appName, 'Suggestion'))+\"\\n    \")]):_vm._e(),_vm._v(\" \"),(_setup.suggestionsLength > 1)?_c('h6',[_vm._v(\"\\n      \"+_vm._s(_setup.t(_setup.appName, 'Suggestions'))+\"\\n    \")]):_vm._e(),_vm._v(\" \"),(_setup.suggestionsLength > 0)?_c('ul',_vm._l((_setup.suggestions),function(parts,iban){return _c('li',{key:iban,staticClass:\"suggestion\"},[_c('button',{on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _setup.selectSuggestion(iban)}}},[_vm._v(\"\\n          \"+_vm._s(_setup.t(_setup.appName, 'use'))+\"\\n           \\n          \"),_vm._v(\" \"),_vm._l((parts),function(part){return _c('span',{class:['iban-part', { 'part-equal': part.equal, 'part-different': !part.equal }]},[_vm._v(_vm._s(part.str))])})],2)])}),0):_vm._e()]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2022-2025 Claus-Justus Heine <himself@claus-justus-heine.de>\n *\n * @author Claus-Justus Heine <himself@claus-justus-heine.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { appName } from '../../config.ts';\nimport {\n  generateUrl as nextcloudGenerateUrl,\n  generateOcsUrl as nextcloudGenerateOcsUrl,\n} from '@nextcloud/router';\nimport type { UrlOptions } from '@nextcloud/router';\n\n/**\n * Generate an absolute URL for this app.\n *\n * @param {string} url The locate URL without app-prefix.\n *\n * @param {object} [urlParams] Object holding url-parameters if url\n * contains parameters. \"Excess\" parameters will be appended as query\n * parameters to the URL.\n *\n * @param urlOptions Object with query parameters\n * ```\n * {\n *   escape: BOOL,\n *   noRewrite: BOOL,\n * }\n * ```\n */\nexport const generateUrl = <T extends string>(url: T, urlParams?: Record<string, string|number|boolean|null>, urlOptions?: UrlOptions) => {\n  // const str = '/image/{joinTable}/{ownerId}';\n  let generated = nextcloudGenerateUrl('/apps/' + appName + '/' + url, urlParams, urlOptions);\n  const queryParams = { ...(urlParams || {}) };\n  for (const urlParam of url.matchAll(/{([^{}]*)}/g)) {\n    delete queryParams[urlParam[1]];\n  }\n  const queryArray: string[] = [];\n  for (const [key, value] of Object.entries(queryParams)) {\n    try {\n      queryArray.push(key + '=' + encodeURIComponent(value?.toString() || ''));\n    } catch (e) {\n      console.debug('STRING CONVERSION ERROR', e);\n    }\n  }\n  if (queryArray.length > 0) {\n    generated += '?' + queryArray.join('&');\n  }\n  return generated;\n};\n\nexport const generateOcsUrl = <T extends string>(url: T, urlParams?: Record<string, string|number|boolean|null>, urlOptions?: UrlOptions) => {\n  let generated = nextcloudGenerateOcsUrl('/apps/' + appName + '/' + url, urlParams, urlOptions);\n  const queryParams = { ...urlParams };\n  for (const urlParam of url.matchAll(/{([^{}]*)}/g)) {\n    delete queryParams[urlParam[1]];\n  }\n  const queryArray: string[] = [];\n  for (const [key, value] of Object.entries(queryParams)) {\n    try {\n      queryArray.push(key + '=' + encodeURIComponent(value?.toString() || ''));\n    } catch (e) {\n      console.debug('STRING CONVERSION ERROR', e);\n    }\n  }\n  if (queryArray.length > 0) {\n    generated += '?' + queryArray.join('&');\n  }\n  return generated;\n};\n\nexport default generateUrl;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { appName } from './config.ts'\nimport { translate as t } from '@nextcloud/l10n'\nimport {\n  NcTextField,\n} from '@nextcloud/vue'\nimport {\n  reactive,\n  watch,\n} from 'vue'\nimport type { BankAccountData } from './bank-account.d.ts'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'BankAccountInputMask',\n  props: {\n    bankAccount: null\n  },\n  emits: ['update:bankAccount', 'blur:account-field'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as { bankAccount: BankAccountData };\n\n\n\nconsole.info('BAV PROPS', { props })\n\nconst accountData = reactive(props.bankAccount)\n\n\n\nconst onBlur = (key: string) => {\n  emit('blur:account-field', { [key]: accountData[key] })\n}\n\nconst accountKeys: (keyof BankAccountData)[] = Object.keys(props.bankAccount).filter(key => !key.startsWith('_')) as (keyof BankAccountData)[]\n\nwatch(props, () => {\n  for (const key of accountKeys) {\n    if (accountData[key] !== props.bankAccount[key]) {\n      console.info('BAV PROPS WATCHER', { key, old: accountData[key], new: props.bankAccount[key] })\n      accountData[key] = props.bankAccount[key]\n    }\n  }\n})\n\nconst emitUpdate = (key: keyof BankAccountData) => {\n  emit('update:bankAccount', { changed: key, data: accountData })\n}\n\nfor (const key of accountKeys) {\n  watch(() => accountData[key], () => emitUpdate(key))\n}\n\n\nreturn { __sfc: true,props, accountData, emit, onBlur, accountKeys, emitUpdate, appName, t, NcTextField }\n}\n\n})","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-6.use[1]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./BankAccountInputMask.vue?vue&type=script&setup=true&lang=ts\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-6.use[1]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./BankAccountInputMask.vue?vue&type=script&setup=true&lang=ts\"","<!--\n - BAV -- German Bank Account Validator\n -\n - @author Claus-Justus Heine\n - @copyright 2025 Claus-Justus Heine <himself@claus-justus-heine.de>\n -\n - This library is free software; you can redistribute it and/or\n - modify it under the terms of the GNU GENERAL PUBLIC LICENSE\n - License as published by the Free Software Foundation; either\n - version 3 of the License, or any later version.\n -\n - This library is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n - GNU AFFERO GENERAL PUBLIC LICENSE for more details.\n -\n - You should have received a copy of the GNU Lesser General Public\n - License along with this library.  If not, see <http://www.gnu.org/licenses/>.\n -->\n<template>\n  <div class=\"container flex flex-column\">\n    <NcTextField :value.sync=\"accountData.IBAN\"\n                 type=\"text\"\n                 name=\"bankAccountIBAN\"\n                 placeholder=\"DE48123456780123456789\"\n                 :label=\"t(appName, 'IBAN')\"\n                 @blur=\"onBlur('IBAN')\"\n    />\n    <NcTextField :value.sync=\"accountData.BIC\"\n                 type=\"text\"\n                 name=\"bankAccountBIC\"\n                 placeholder=\"XYBLAHDEFXX\"\n                 :label=\"t(appName, 'BIC')\"\n                 @blur=\"onBlur('BIC')\"\n    />\n    <NcTextField :value.sync=\"accountData.bankId\"\n                 type=\"text\"\n                 name=\"bankAccountBankId\"\n                 placeholder=\"12345678\"\n                 :label=\"t(appName, 'Bank Id')\"\n                 @blur=\"onBlur('bankId')\"\n    />\n    <NcTextField :value.sync=\"accountData.accountId\"\n                 type=\"text\"\n                 name=\"bankAccountId\"\n                 placeholder=\"0123456789\"\n                 :label=\"t(appName, 'Bank Account Id')\"\n                 @blur=\"onBlur('accountId')\"\n    />\n    <NcTextField :value.sync=\"accountData.bankName\"\n                 type=\"text\"\n                 readonly\n                 name=\"bankAccountBankName\"\n                 placeholder=\"\"\n                 :label=\"t(appName, 'Bank')\"\n    />\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { appName } from './config.ts'\nimport { translate as t } from '@nextcloud/l10n'\nimport {\n  NcTextField,\n} from '@nextcloud/vue'\nimport {\n  reactive,\n  watch,\n} from 'vue'\nimport type { BankAccountData } from './bank-account.d.ts'\n\nconst props = defineProps<{ bankAccount: BankAccountData }>()\n\nconsole.info('BAV PROPS', { props })\n\nconst accountData = reactive(props.bankAccount)\n\nconst emit = defineEmits(['update:bankAccount', 'blur:account-field'])\n\nconst onBlur = (key: string) => {\n  emit('blur:account-field', { [key]: accountData[key] })\n}\n\nconst accountKeys: (keyof BankAccountData)[] = Object.keys(props.bankAccount).filter(key => !key.startsWith('_')) as (keyof BankAccountData)[]\n\nwatch(props, () => {\n  for (const key of accountKeys) {\n    if (accountData[key] !== props.bankAccount[key]) {\n      console.info('BAV PROPS WATCHER', { key, old: accountData[key], new: props.bankAccount[key] })\n      accountData[key] = props.bankAccount[key]\n    }\n  }\n})\n\nconst emitUpdate = (key: keyof BankAccountData) => {\n  emit('update:bankAccount', { changed: key, data: accountData })\n}\n\nfor (const key of accountKeys) {\n  watch(() => accountData[key], () => emitUpdate(key))\n}\n\n</script>\n<style scoped lang=\"scss\">\n</style>\n","import { render, staticRenderFns } from \"./BankAccountInputMask.vue?vue&type=template&id=53a9c702&scoped=true\"\nimport script from \"./BankAccountInputMask.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BankAccountInputMask.vue?vue&type=script&setup=true&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"53a9c702\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"container flex flex-column\"},[_c(_setup.NcTextField,{attrs:{\"value\":_setup.accountData.IBAN,\"type\":\"text\",\"name\":\"bankAccountIBAN\",\"placeholder\":\"DE48123456780123456789\",\"label\":_setup.t(_setup.appName, 'IBAN')},on:{\"update:value\":function($event){return _vm.$set(_setup.accountData, \"IBAN\", $event)},\"blur\":function($event){return _setup.onBlur('IBAN')}}}),_vm._v(\" \"),_c(_setup.NcTextField,{attrs:{\"value\":_setup.accountData.BIC,\"type\":\"text\",\"name\":\"bankAccountBIC\",\"placeholder\":\"XYBLAHDEFXX\",\"label\":_setup.t(_setup.appName, 'BIC')},on:{\"update:value\":function($event){return _vm.$set(_setup.accountData, \"BIC\", $event)},\"blur\":function($event){return _setup.onBlur('BIC')}}}),_vm._v(\" \"),_c(_setup.NcTextField,{attrs:{\"value\":_setup.accountData.bankId,\"type\":\"text\",\"name\":\"bankAccountBankId\",\"placeholder\":\"12345678\",\"label\":_setup.t(_setup.appName, 'Bank Id')},on:{\"update:value\":function($event){return _vm.$set(_setup.accountData, \"bankId\", $event)},\"blur\":function($event){return _setup.onBlur('bankId')}}}),_vm._v(\" \"),_c(_setup.NcTextField,{attrs:{\"value\":_setup.accountData.accountId,\"type\":\"text\",\"name\":\"bankAccountId\",\"placeholder\":\"0123456789\",\"label\":_setup.t(_setup.appName, 'Bank Account Id')},on:{\"update:value\":function($event){return _vm.$set(_setup.accountData, \"accountId\", $event)},\"blur\":function($event){return _setup.onBlur('accountId')}}}),_vm._v(\" \"),_c(_setup.NcTextField,{attrs:{\"value\":_setup.accountData.bankName,\"type\":\"text\",\"readonly\":\"\",\"name\":\"bankAccountBankName\",\"placeholder\":\"\",\"label\":_setup.t(_setup.appName, 'Bank')},on:{\"update:value\":function($event){return _vm.$set(_setup.accountData, \"bankName\", $event)}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * Orchestra member, musicion and project management application.\n *\n * CAFEVDB -- Camerata Academica Freiburg e.V. DataBase.\n *\n * @author Claus-Justus Heine\n * @copyright 2025 Claus-Justus Heine <himself@claus-justus-heine.de>\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport axios, { AxiosError } from 'axios';\nimport type { AxiosResponse } from 'axios';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface AxiosErrorResponse<T = unknown, D = any> extends Omit<AxiosError<T, D>, 'response'> {\n  response: AxiosResponse<T, D>,\n}\n\nexport const isAxiosError = (error: unknown): error is AxiosError => axios.isAxiosError(error);\n\nexport const isAxiosErrorResponse = (error: unknown): error is AxiosErrorResponse =>\n  isAxiosError(error) && !!error.response;\n","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-6.use[1]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&setup=true&lang=ts\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-6.use[1]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&setup=true&lang=ts\"","import { defineComponent as _defineComponent } from 'vue'\nimport { appName } from './config.ts'\nimport { generateUrl as generateAppUrl } from './toolkit/util/generate-url.ts'\nimport { translate as t } from '@nextcloud/l10n'\nimport axios from '@nextcloud/axios'\nimport {\n  NcButton,\n  NcDialog,\n  NcPopover,\n} from '@nextcloud/vue'\nimport DynamicSvgIcon from '@rotdrop/nextcloud-vue-components/lib/components/DynamicSvgIcon.vue'\nimport { showError } from '@nextcloud/dialogs'\nimport {\n  computed,\n  onMounted,\n  onUnmounted,\n  reactive,\n  ref,\n} from 'vue'\nimport BankAccountInputMask from './BankAccountInputMask.vue'\nimport {\n  isAxiosError,\n  isAxiosErrorResponse,\n} from './toolkit/types/axios-type-guards.ts'\nimport type { BankAccountData } from './bank-account.d.ts'\nimport appIcon from '../img/bav-color.svg?raw'\n\ninterface EqualityPart {\n  str: string,\n  equal: boolean,\n  start: number,\n  len: number,\n}\ninterface ValidateResponse extends BankAccountData {\n  messages: string[],\n  suggestions: Record<string, string>,\n}\n\ninterface ValidateInputArgs {\n  data: BankAccountData,\n  changed: keyof BankAccountData|null,\n  liveUpdate: boolean,\n}\n\ninterface UpdateBankAccountEvent {\n  data: BankAccountData,\n  changed: keyof BankAccountData,\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props, { expose }) {\n\nconst showDialog = ref(true)\n\nconst showAbout = ref(false)\n\nconst inputForm = ref<null | Vue>(null)\n\nconst hints = ref<string[]>([])\nconst suggestions = ref<Record<string, EqualityPart[]>>({})\nconst suggestionsLength = computed(() => Object.keys(suggestions.value).length)\n\nconst accountDataDefaults: BankAccountData = {\n  IBAN: '',\n  BIC: '',\n  bankId: '',\n  accountId: '',\n  bankName: '',\n}\n\nconst accountDataKeys: (keyof BankAccountData)[] = Object.keys(accountDataDefaults) as (keyof BankAccountData)[]\n\nconst accountData = reactive<BankAccountData>({ ...accountDataDefaults })\n\n// All fields are empty\nconst isEmptyData = (data: BankAccountData) =>\n  accountDataKeys.reduce((accu, key) => accu && !data[key], true)\n\n// All fields are non-empty\nconst isFilledData = (data: BankAccountData) =>\n  accountDataKeys.reduce((accu, key) => accu && !!data[key], true)\n\nconst emptyContent = computed(() => isEmptyData(accountData))\n\nconst historyData = ref<BankAccountData[]>([])\nconst historyPosition = ref(-1)\nconst atHistoryBottom = computed(() => historyPosition.value <= 0)\nconst atHistoryTop = computed(() => historyPosition.value >= historyData.value.length - 1)\nconst currentHistory = computed(\n  () => historyPosition.value >= 0 && historyPosition.value < historyData.value.length\n    ? historyData.value[historyPosition.value]\n    : null,\n)\n\nconst pushHistory = (data: BankAccountData) => {\n  if (isEmptyData(data)) {\n    return\n  }\n  if (currentHistory.value) {\n    let equal = true\n    for (const key of accountDataKeys) {\n      if (currentHistory.value[key] !== data[key]) {\n        equal = false\n        break\n      }\n    }\n    if (equal) {\n      return\n    }\n  }\n  historyData.value.splice(historyPosition.value + 1, Infinity, { ...data })\n  ++historyPosition.value\n}\n\nconst clearForm = () => {\n  Object.assign(accountData, accountDataDefaults)\n}\n\nconst stateHistoryGo = (delta: number) => {\n  historyPosition.value += delta\n  if (historyData.value.length > 0 && historyPosition.value < 0) {\n    historyPosition.value = 0\n  } else if (historyPosition.value >= historyData.value.length) {\n    historyPosition.value = historyData.value.length - 1\n  }\n  if (currentHistory.value) {\n    Object.assign(accountData, currentHistory.value)\n  } else {\n    // should not happen ...\n    clearForm()\n  }\n  validateInput({ data: accountData, changed: null, liveUpdate: false })\n}\n\nconst validationUrl = generateAppUrl('validate')\n\nlet abortController = new AbortController()\n\nconst human = (value: string, partLen = 4) => {\n  const re = new RegExp('.{1,' + partLen + '}', 'gs')\n  return value.match(re)!.join(' ')\n}\n\nconst splitSuggestion = (suggestion: string, iban: string) => {\n  const parts: EqualityPart[] = []\n  let start = 0\n  let len = 0\n  let equal = true\n  iban = human(iban.replace(' ', ''))\n  for (let i = 0; i < Math.min(suggestion.length, iban.length); ++i) {\n    if ((suggestion[i] === iban[i]) === equal) {\n      ++len\n    } else {\n      const part = {\n        str: suggestion.substring(start, start + len),\n        equal,\n        start,\n        len,\n      }\n      parts.push(part)\n      equal = !equal\n      start = i\n      len = 1\n    }\n  }\n  if (len > 0) {\n    const part = {\n      str: suggestion.substring(start),\n      equal,\n      start,\n      len,\n    }\n    parts.push(part)\n  }\n  return parts\n}\n\nconst selectSuggestion = (iban: string) => {\n  Object.assign(accountData, accountDataDefaults)\n  accountData.IBAN = iban\n}\n\nconst validateInput = async ({ data, changed, liveUpdate }: ValidateInputArgs) => {\n  try {\n    abortController.abort()\n    abortController = new AbortController()\n    const response = await axios.post<ValidateResponse>(\n      validationUrl,\n      data,\n      {\n        signal: abortController.signal,\n      },\n    )\n    for (const key of Object.keys(accountDataDefaults)) {\n      if (liveUpdate && key === changed) {\n        continue // do not interrupt user input\n      }\n      if (accountData[key] !== response.data[key]) {\n        accountData[key] = response.data[key]\n      }\n    }\n    hints.value = response.data.messages\n    suggestions.value = Object.fromEntries(\n      Object.entries(response.data.suggestions).map(([machine, human]) => [machine, splitSuggestion(human, accountData.IBAN)]),\n    )\n    if (!liveUpdate || (isFilledData(accountData) && Object.keys(suggestions.value).length === 0)) {\n      pushHistory(accountData)\n    }\n  } catch (e) {\n    if (isAxiosError(e) && e.name === 'CanceledError') {\n      console.debug('VALIDATION CANCELED BY USER INPUT')\n    } else {\n      console.error('BAV VALIDATION ERROR', { error: e })\n      let message = t(appName, 'reason unknown')\n      if (isAxiosErrorResponse(e) && e.response.data) {\n        const responseData = e.response.data as { messages?: string[] }\n        if (Array.isArray(responseData.messages)) {\n          message = responseData.messages.join(' ')\n        }\n      }\n      showError(t(appName, 'Unable to validate the given bank account data: {message}', {\n        message,\n      }))\n    }\n  }\n}\n\nconst onUpdateBankAccount = async (event: UpdateBankAccountEvent) => {\n  validateInput({ data: event.data, changed: event.changed, liveUpdate: true }) // just autocomplete, do not complain, perhaps add suggestions\n}\n\nconst onBlur = async (event: Record<keyof BankAccountData, string>) => {\n  const data = { ...accountData, ...event }\n  const changed = Object.keys(event)[0] as keyof BankAccountData\n  await validateInput({ data, changed, liveUpdate: false })\n}\n\nconst setVisibility = (visible: boolean) => {\n  showDialog.value = visible\n}\n\nconst getVisibility = () => showDialog.value\n\nlet mounted = false\n\nonMounted(() => { mounted = true })\nonUnmounted(() => { mounted = false })\n\nconst getMounted = () => mounted\n\nexpose({\n  setVisibility,\n  getVisibility,\n  getMounted,\n})\n\n// Vue has problems with literal texts, so hack around those Vue deficiencies\nconst about = reactive({\n  title: t(appName, 'This is a front-end to the German Bank Account Validator (BAV) developed my M. Malkusch.'),\n  backendStatus: t(\n    appName,\n    `The backend is no longer actively maintained, but there are some forks on GitHub ({github}).\nHowever, it still seems to work for the majority of German bank accounts.`,\n    { github: 'https://github.com/bav-php/bav/forks' },\n  ),\n  policy: t(appName, `Data entered will not be stored. BAV is able to compute\nthe BIC given the bank-id, and to compute the IBAN\ngiven additionally the bank-account id.\nAdditionally, it verifies that the bank-id exists\nby comparing it with the data provided by the Deutsche Bundesbank.\nIt will also pick the correct check-sum formula for the given\nbank-account id (there are a few hundrets of possible\ncheck-sum formulas, differing from bank to bank, all archived and publically\navailable at the Deutsche Bundesbank).\nFinally, given an IBAN, it will extract the bank-id and bank-account-id\nand also perform the check-sum computations in order to test whether the\nprovided bank-account data is consistent.`),\n  checksumWarning: t(appName, `Please keep in mind that check-sums\ncannot catch all possible errors.`),\n  disclaimer: t(\n    appName,\n    `This program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with this program.  If not, see {gnuLicenses}.`,\n    { gnuLicenses: 'http://www.gnu.org/licenses/' },\n  ),\n})\n\nreturn { __sfc: true,showDialog, showAbout, inputForm, hints, suggestions, suggestionsLength, accountDataDefaults, accountDataKeys, accountData, isEmptyData, isFilledData, emptyContent, historyData, historyPosition, atHistoryBottom, atHistoryTop, currentHistory, pushHistory, clearForm, stateHistoryGo, validationUrl, abortController, human, splitSuggestion, selectSuggestion, validateInput, onUpdateBankAccount, onBlur, setVisibility, getVisibility, mounted, getMounted, about, appName, t, NcButton, NcDialog, NcPopover, DynamicSvgIcon, BankAccountInputMask, appIcon }\n}\n\n})","<!--\n - BAV -- German Bank Account Validator\n -\n - @author Claus-Justus Heine\n - @copyright 2025 Claus-Justus Heine <himself@claus-justus-heine.de>\n -\n - This library is free software; you can redistribute it and/or\n - modify it under the terms of the GNU GENERAL PUBLIC LICENSE\n - License as published by the Free Software Foundation; either\n - version 3 of the License, or any later version.\n -\n - This library is distributed in the hope that it will be useful,\n - but WITHOUT ANY WARRANTY; without even the implied warranty of\n - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n - GNU AFFERO GENERAL PUBLIC LICENSE for more details.\n -\n - You should have received a copy of the GNU Lesser General Public\n - License along with this library.  If not, see <http://www.gnu.org/licenses/>.\n -->\n<template>\n  <!-- :has-next=\"false\"\n       :has-prev=\"false\"\n       container=\"#body-user\"\n  -->\n  <NcDialog :name=\"t(appName, 'BAV - Bank Account Validator (DE)')\"\n            size=\"large\"\n            :close-on-click-outside=\"false\"\n            :open.sync=\"showDialog\"\n  >\n    <template #actions>\n      <NcButton :disabled=\"atHistoryBottom\"\n                @click=\"stateHistoryGo(-1)\"\n      >\n        {{ t(appName, 'Undo') }}\n      </NcButton>\n      <NcButton :disabled=\"atHistoryTop\"\n                @click=\"stateHistoryGo(1)\"\n      >\n        {{ t(appName, 'Redo') }}\n      </NcButton>\n      <NcButton :disabled=\"emptyContent\"\n                @click=\"clearForm\"\n      >\n        {{ t(appName, 'Clear') }}\n      </NcButton>\n      <NcPopover :shown.sync=\"showAbout\"\n                 :focus-trap=\"false\"\n      >\n        <template #trigger>\n          <NcButton @click=\"showAbout = true\">\n            {{ t(appName, 'About') }}\n          </NcButton>\n        </template>\n        <div class=\"about\">\n          {{ about.title }}\n        </div>\n        <div class=\"about\">\n          {{ about.backendStatus }}\n        </div>\n        <div class=\"about\">\n          {{ about.policy }}\n        </div>\n        <div class=\"about checksum\">\n          {{ about.checksumWarning }}\n        </div>\n        <div class=\"about disclaimer\">\n          {{ about.disclaimer }}\n        </div>\n      </NcPopover>\n      <NcButton @click=\"showDialog = false\">\n        {{ t(appName, 'Close') }}\n      </NcButton>\n    </template>\n    <template #default>\n      <DynamicSvgIcon class=\"dialog-app-icon\"\n                      :size=\"34\"\n                      :data=\"appIcon\"\n                      :title=\"t(appName, 'app-logo')\"\n      />\n      <BankAccountInputMask ref=\"inputForm\"\n                            :bank-account=\"accountData\"\n                            @update:bankAccount=\"onUpdateBankAccount\"\n                            @blur:account-field=\"onBlur\"\n      />\n      <h6 v-if=\"hints.length > 0\" class=\"hints\">\n        {{ t(appName, 'Errors and Hints') }}\n      </h6>\n      <!-- eslint-disable-next-line vue/require-v-for-key -->\n      <span v-for=\"hint in hints\" class=\"hint\">{{ hint }}.&nbsp;</span>\n      <h6 v-if=\"suggestionsLength === 1\">\n        {{ t(appName, 'Suggestion') }}\n      </h6>\n      <h6 v-if=\"suggestionsLength > 1\">\n        {{ t(appName, 'Suggestions') }}\n      </h6>\n      <ul v-if=\"suggestionsLength > 0\">\n        <li v-for=\"(parts, iban) in suggestions\"\n            :key=\"iban\"\n            class=\"suggestion\"\n        >\n          <button @click.prevent.stop=\"selectSuggestion(iban)\">\n            {{ t(appName, 'use') }}\n            &nbsp;\n            <!-- eslint-disable-next-line vue/require-v-for-key -->\n            <span v-for=\"part in parts\"\n                  :class=\"['iban-part', { 'part-equal': part.equal, 'part-different': !part.equal }]\"\n            >{{ part.str }}</span>\n          </button>\n        </li>\n      </ul>\n    </template>\n  </NcDialog>\n</template>\n<script setup lang=\"ts\">\nimport { appName } from './config.ts'\nimport { generateUrl as generateAppUrl } from './toolkit/util/generate-url.ts'\nimport { translate as t } from '@nextcloud/l10n'\nimport axios from '@nextcloud/axios'\nimport {\n  NcButton,\n  NcDialog,\n  NcPopover,\n} from '@nextcloud/vue'\nimport DynamicSvgIcon from '@rotdrop/nextcloud-vue-components/lib/components/DynamicSvgIcon.vue'\nimport { showError } from '@nextcloud/dialogs'\nimport {\n  computed,\n  onMounted,\n  onUnmounted,\n  reactive,\n  ref,\n} from 'vue'\nimport BankAccountInputMask from './BankAccountInputMask.vue'\nimport {\n  isAxiosError,\n  isAxiosErrorResponse,\n} from './toolkit/types/axios-type-guards.ts'\nimport type { BankAccountData } from './bank-account.d.ts'\nimport appIcon from '../img/bav-color.svg?raw'\n\nconst showDialog = ref(true)\n\nconst showAbout = ref(false)\n\nconst inputForm = ref<null | Vue>(null)\n\nconst hints = ref<string[]>([])\ninterface EqualityPart {\n  str: string,\n  equal: boolean,\n  start: number,\n  len: number,\n}\nconst suggestions = ref<Record<string, EqualityPart[]>>({})\nconst suggestionsLength = computed(() => Object.keys(suggestions.value).length)\n\nconst accountDataDefaults: BankAccountData = {\n  IBAN: '',\n  BIC: '',\n  bankId: '',\n  accountId: '',\n  bankName: '',\n}\n\nconst accountDataKeys: (keyof BankAccountData)[] = Object.keys(accountDataDefaults) as (keyof BankAccountData)[]\n\nconst accountData = reactive<BankAccountData>({ ...accountDataDefaults })\n\n// All fields are empty\nconst isEmptyData = (data: BankAccountData) =>\n  accountDataKeys.reduce((accu, key) => accu && !data[key], true)\n\n// All fields are non-empty\nconst isFilledData = (data: BankAccountData) =>\n  accountDataKeys.reduce((accu, key) => accu && !!data[key], true)\n\nconst emptyContent = computed(() => isEmptyData(accountData))\n\nconst historyData = ref<BankAccountData[]>([])\nconst historyPosition = ref(-1)\nconst atHistoryBottom = computed(() => historyPosition.value <= 0)\nconst atHistoryTop = computed(() => historyPosition.value >= historyData.value.length - 1)\nconst currentHistory = computed(\n  () => historyPosition.value >= 0 && historyPosition.value < historyData.value.length\n    ? historyData.value[historyPosition.value]\n    : null,\n)\n\nconst pushHistory = (data: BankAccountData) => {\n  if (isEmptyData(data)) {\n    return\n  }\n  if (currentHistory.value) {\n    let equal = true\n    for (const key of accountDataKeys) {\n      if (currentHistory.value[key] !== data[key]) {\n        equal = false\n        break\n      }\n    }\n    if (equal) {\n      return\n    }\n  }\n  historyData.value.splice(historyPosition.value + 1, Infinity, { ...data })\n  ++historyPosition.value\n}\n\nconst clearForm = () => {\n  Object.assign(accountData, accountDataDefaults)\n}\n\nconst stateHistoryGo = (delta: number) => {\n  historyPosition.value += delta\n  if (historyData.value.length > 0 && historyPosition.value < 0) {\n    historyPosition.value = 0\n  } else if (historyPosition.value >= historyData.value.length) {\n    historyPosition.value = historyData.value.length - 1\n  }\n  if (currentHistory.value) {\n    Object.assign(accountData, currentHistory.value)\n  } else {\n    // should not happen ...\n    clearForm()\n  }\n  validateInput({ data: accountData, changed: null, liveUpdate: false })\n}\n\nconst validationUrl = generateAppUrl('validate')\n\ninterface ValidateResponse extends BankAccountData {\n  messages: string[],\n  suggestions: Record<string, string>,\n}\n\nlet abortController = new AbortController()\n\nconst human = (value: string, partLen = 4) => {\n  const re = new RegExp('.{1,' + partLen + '}', 'gs')\n  return value.match(re)!.join(' ')\n}\n\nconst splitSuggestion = (suggestion: string, iban: string) => {\n  const parts: EqualityPart[] = []\n  let start = 0\n  let len = 0\n  let equal = true\n  iban = human(iban.replace(' ', ''))\n  for (let i = 0; i < Math.min(suggestion.length, iban.length); ++i) {\n    if ((suggestion[i] === iban[i]) === equal) {\n      ++len\n    } else {\n      const part = {\n        str: suggestion.substring(start, start + len),\n        equal,\n        start,\n        len,\n      }\n      parts.push(part)\n      equal = !equal\n      start = i\n      len = 1\n    }\n  }\n  if (len > 0) {\n    const part = {\n      str: suggestion.substring(start),\n      equal,\n      start,\n      len,\n    }\n    parts.push(part)\n  }\n  return parts\n}\n\nconst selectSuggestion = (iban: string) => {\n  Object.assign(accountData, accountDataDefaults)\n  accountData.IBAN = iban\n}\n\ninterface ValidateInputArgs {\n  data: BankAccountData,\n  changed: keyof BankAccountData|null,\n  liveUpdate: boolean,\n}\n\nconst validateInput = async ({ data, changed, liveUpdate }: ValidateInputArgs) => {\n  try {\n    abortController.abort()\n    abortController = new AbortController()\n    const response = await axios.post<ValidateResponse>(\n      validationUrl,\n      data,\n      {\n        signal: abortController.signal,\n      },\n    )\n    for (const key of Object.keys(accountDataDefaults)) {\n      if (liveUpdate && key === changed) {\n        continue // do not interrupt user input\n      }\n      if (accountData[key] !== response.data[key]) {\n        accountData[key] = response.data[key]\n      }\n    }\n    hints.value = response.data.messages\n    suggestions.value = Object.fromEntries(\n      Object.entries(response.data.suggestions).map(([machine, human]) => [machine, splitSuggestion(human, accountData.IBAN)]),\n    )\n    if (!liveUpdate || (isFilledData(accountData) && Object.keys(suggestions.value).length === 0)) {\n      pushHistory(accountData)\n    }\n  } catch (e) {\n    if (isAxiosError(e) && e.name === 'CanceledError') {\n      console.debug('VALIDATION CANCELED BY USER INPUT')\n    } else {\n      console.error('BAV VALIDATION ERROR', { error: e })\n      let message = t(appName, 'reason unknown')\n      if (isAxiosErrorResponse(e) && e.response.data) {\n        const responseData = e.response.data as { messages?: string[] }\n        if (Array.isArray(responseData.messages)) {\n          message = responseData.messages.join(' ')\n        }\n      }\n      showError(t(appName, 'Unable to validate the given bank account data: {message}', {\n        message,\n      }))\n    }\n  }\n}\n\ninterface UpdateBankAccountEvent {\n  data: BankAccountData,\n  changed: keyof BankAccountData,\n}\n\nconst onUpdateBankAccount = async (event: UpdateBankAccountEvent) => {\n  validateInput({ data: event.data, changed: event.changed, liveUpdate: true }) // just autocomplete, do not complain, perhaps add suggestions\n}\n\nconst onBlur = async (event: Record<keyof BankAccountData, string>) => {\n  const data = { ...accountData, ...event }\n  const changed = Object.keys(event)[0] as keyof BankAccountData\n  await validateInput({ data, changed, liveUpdate: false })\n}\n\nconst setVisibility = (visible: boolean) => {\n  showDialog.value = visible\n}\n\nconst getVisibility = () => showDialog.value\n\nlet mounted = false\n\nonMounted(() => { mounted = true })\nonUnmounted(() => { mounted = false })\n\nconst getMounted = () => mounted\n\ndefineExpose({\n  setVisibility,\n  getVisibility,\n  getMounted,\n})\n\n// Vue has problems with literal texts, so hack around those Vue deficiencies\nconst about = reactive({\n  title: t(appName, 'This is a front-end to the German Bank Account Validator (BAV) developed my M. Malkusch.'),\n  backendStatus: t(\n    appName,\n    `The backend is no longer actively maintained, but there are some forks on GitHub ({github}).\nHowever, it still seems to work for the majority of German bank accounts.`,\n    { github: 'https://github.com/bav-php/bav/forks' },\n  ),\n  policy: t(appName, `Data entered will not be stored. BAV is able to compute\nthe BIC given the bank-id, and to compute the IBAN\ngiven additionally the bank-account id.\nAdditionally, it verifies that the bank-id exists\nby comparing it with the data provided by the Deutsche Bundesbank.\nIt will also pick the correct check-sum formula for the given\nbank-account id (there are a few hundrets of possible\ncheck-sum formulas, differing from bank to bank, all archived and publically\navailable at the Deutsche Bundesbank).\nFinally, given an IBAN, it will extract the bank-id and bank-account-id\nand also perform the check-sum computations in order to test whether the\nprovided bank-account data is consistent.`),\n  checksumWarning: t(appName, `Please keep in mind that check-sums\ncannot catch all possible errors.`),\n  disclaimer: t(\n    appName,\n    `This program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License\nalong with this program.  If not, see {gnuLicenses}.`,\n    { gnuLicenses: 'http://www.gnu.org/licenses/' },\n  ),\n})\n</script>\n<style scoped lang=\"scss\">\n.suggestion {\n  .iban-part.part-different {\n    color: red;\n    font-weight: bold;\n  }\n}\n.dialog-app-icon {\n  position: absolute;\n  left: 0;\n  top: 0;\n  padding-block: 4px 0;\n  padding-inline: 12px 0;\n}\n.about {\n  max-width: 60ex;\n  margin: 1ex;\n  &.checksum {\n    font-style: italic;\n  }\n  &.disclaimer {\n    font-weight: bold;\n    font-style: italic;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4787f8d9&scoped=true\"\nimport script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=4787f8d9&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4787f8d9\",\n  null\n  \n)\n\nexport default component.exports"],"names":["generateUrl","url","urlParams","urlOptions","generated","nextcloudGenerateUrl","appName","queryParams","urlParam","matchAll","queryArray","key","value","Object","entries","push","encodeURIComponent","toString","e","console","debug","length","join","_defineComponent","__name","props","bankAccount","emits","setup","__props","emit","info","accountData","reactive","accountKeys","keys","filter","startsWith","watch","old","new","emitUpdate","changed","data","__sfc","onBlur","t","NcTextField","_vm","this","_c","_self","_setup","_setupProxy","staticClass","attrs","IBAN","on","$event","$set","_v","BIC","bankId","accountId","bankName","isAxiosError","error","axios","expose","showDialog","ref","showAbout","inputForm","hints","suggestions","suggestionsLength","computed","accountDataDefaults","accountDataKeys","isEmptyData","reduce","accu","isFilledData","emptyContent","historyData","historyPosition","atHistoryBottom","atHistoryTop","currentHistory","pushHistory","equal","splice","Infinity","clearForm","assign","validationUrl","generateAppUrl","abortController","AbortController","human","partLen","re","RegExp","match","splitSuggestion","suggestion","iban","parts","start","len","replace","i","Math","min","part","str","substring","validateInput","async","liveUpdate","abort","response","post","signal","messages","fromEntries","map","machine","name","message","responseData","Array","isArray","showError","setVisibility","visible","getVisibility","mounted","onMounted","onUnmounted","getMounted","about","title","backendStatus","github","policy","checksumWarning","disclaimer","gnuLicenses","stateHistoryGo","delta","selectSuggestion","onUpdateBankAccount","event","NcButton","NcDialog","NcPopover","DynamicSvgIcon","BankAccountInputMask","appIcon","scopedSlots","_u","fn","_s","proxy","_e","_l","hint","preventDefault","stopPropagation","class"],"sourceRoot":""}